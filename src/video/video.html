<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>video</title>
    <style>
      video{
        width: 800px;
        height:500px;
      }
      #progress{
        width: 100%;
        height: 10px;
      }
    </style>
  </head>
  <body>
    <video id="myVideo" src="http://adl.duoyi.com/sc111/csm/video/cg/csm_xc5.mp4" controls="false" poster="http://d.hiphotos.baidu.com/zhidao/pic/item/c8177f3e6709c93d13b161359e3df8dcd00054b4.jpg" controlslist="nodownload">
      你的浏览器不支持video
    </video>
    <div>
      <input type="button" value="播放/暂停" id="play_pause"/>
      <input type="button" value="前进15s" id="move_15s"/>
      <input type="button" value="后退15s" id="move_back_15s"/>
      <input type="button" value="8倍速" id="speed_up"/>
      <input type="button" value="降音量" id="noise_down"/>
      <input type="button" value="静音" id="no_noise"/>
      <input type="button" value="全屏" id="full_screen"/>
      <input type="button" value="seekable" id="seekable"/>
      <input type="button" value="点击进入画中画" id="entry_picture"/>
    </div>
    <div id="progress"></div>
    <div id="currentTime"></div>
    <p id="test"></p>
  </body>
  <script>
    var video = document.getElementById('myVideo');
    var btn1 = document.getElementById('play_pause');
    var btn2 = document.getElementById('speed_up');
    var btn3 = document.getElementById('noise_down');
    var btn4 = document.getElementById('no_noise');
    var btn5 = document.getElementById('full_screen');
    var btn6 = document.getElementById('move_15s');
    var btn7 = document.getElementById('move_back_15s');
    var progress = document.getElementById('progress');
    var seekable = document.getElementById('seekable');
    var currentTime = document.getElementById('currentTime');
    var entry_picture = document.getElementById('entry_picture');
    video.addEventListener('timeupdate',function(){
      progress.style.background = 'linear-gradient(to right,#999 '+(video.currentTime/video.duration)*100+'%,#fff 0)';
      currentTime.innerHTML = "片段经过的时间："+formatDuration(video.currentTime.toFixed(0)) +" / " + formatDuration(video.duration.toFixed(0))
    },false)
    btn1.onclick = function(){
      video.paused ? video.play() : video.pause();
    }
    btn2.onclick = function(){
      video.playbackRate = 8;
    }
    btn3.onclick=function(){
      video.volume -= video.volume-.1>=0?.1:0;
    }
    btn4.onclick=function(){
      video.muted = !video.muted;
    }
    btn5.onclick = function(){
      video.webkitRequestFullScreen();
    }
    btn6.onclick = function(){
      video.currentTime += 15;
    }
    btn7.onclick = function() {
      video.currentTime -= 15;
    }
    document.onkeydown=function(ev){
      if(ev.keyCode==81){
          video.webkitExitFullScreen();
      }
    }
    seekable.onclick = function() {
      document.getElementById("test").innerHTML = 
                "Start Point:" + video.seekable.start(0) + 
                " End Point:" + video.seekable.end(0); 
    }
   video.onended = function() { // 带有 loop 属性不生效
     alert('video is end')
   }

    
   function formatDuration(time){
                if(time > -1){
                    var hour = Math.floor(time/3600);
                    var min = Math.floor(time/60) % 60;
                    var sec = time % 60;
                    if(hour < 10) {
                        time = '0'+ hour + ":";
                    } else {
                        time = hour + ":";
                    }
 
                    if(min < 10){
                        time += "0";
                    }
                    time += min + ":";
 
                    if(sec < 10){
                        time += "0";
                    }
                    time += sec;
                }
                return time;
   }

   // 进入画中画
   entry_picture.onclick = function() {
     video.requestPictureInPicture()
     video.style.display = 'none'
   }
   // 退出画中画
   video.addEventListener('leavepictureinpicture', function() {
     video.style.display = 'block'
   })
    
  </script>
</html>